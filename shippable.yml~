language: php

php: 
  - 5.4

env:
  - secure: I41XOMQoARCX1BMevxHUEb22vEWiYJWlNe7Qcipsg+HCc4d3BqNn+3RAtDTxtrR1dAxodkoijx+avbgJ99WHO8jBTrex6bpKP5CLnUUXyU8E1RTJE194JmwgYTV1sajxwccRca2xbG97aBPXNbHHEQtaGkruMLKFEn1SJzNtPhX7cqfiV3E5RSmfVcAOugHdl6tu1RPbY1ElWx2FqMl4Vbz+g8v3R4rdLtCQB6eQHW3+YpZK9s8u7cg/2+5jE255L6dKaQRC//PkhRh52xhhQdakebYdUgPJjIby+h53IQBLXPfFytdzIrj921PR4C2j8p5R4uR9/EMQ15+ReW3R3Q==
  - secure: HcSfHNLC1Z5dHQ81MN75FvDgR02YK3RUu3Z+AiTuLCSOj90Ievq/0bmk/Br6n7edq0UbJ8Dzjd/1kuDD3pHtz4DjFkUO5JeIBUql+SgZ4ykj46km4TL0ytsW/L/417iITApkwHed3GRX6B0dB2UlMIFgEXUTtLVY9UHObnmD1ilFEqeuUJCzuWXec5lz/sL/S8itrgq3ZV2um+jesl82Mm7mX1dS1m1rTNKboadaryUxXkINVdOBNNoPpVbls1jrb1vOzKOe9KsKPZKvQWLtaO/6niaNabcOWv8VSLDg5S/4fYnq4+KwK5axr8WZnpb1ScKV3bMf0B3MSFCI0C2MEw==

before_script: 
  - mkdir -p shippable/testresults
  - mkdir -p ~/.elasticbeanstalk
  - echo 'AWSAccessKeyId='$AWSAccessKeyId >> ~/.elasticbeanstalk/aws_credential_file
  - echo 'AWSSecretKey='$AWSSecretKey >> ~/.elasticbeanstalk/aws_credential_file

script:
  - mkdir -p .elasticbeanstalk
  - cp config .elasticbeanstalk/
  - phpunit  --log-junit shippable/testresults/junit.xml tests/calculator_test.php

notifications:
   email: false

after_success :
  - export PATH=$PATH:/home/raghu/samples/aws/eb/linux/python2.7/ && eb init && eb push

      
